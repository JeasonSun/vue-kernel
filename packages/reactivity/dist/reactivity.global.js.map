{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["export const extend = Object.assign;\n\nexport const isObject = (value) => {\n  return value !== null && typeof value === \"object\";\n};\n\nexport const hasChanged = (value, newValue) => {\n  return !Object.is(value, newValue);\n};\n","import { extend } from \"../../shared/src\";\n\nconst targetMap = new WeakMap();\nlet activeEffect = void 0;\nlet shouldTrack = false;\n\nexport class ReactiveEffect {\n  deps: any[] = [];\n  active = true;\n  constructor(public fn, public scheduler?) {}\n\n  run() {\n    if (!this.active) {\n      return this.fn();\n    }\n\n    activeEffect = this as any;\n    shouldTrack = true;\n\n    const result = this.fn();\n\n    activeEffect = undefined;\n    shouldTrack = false;\n\n    return result;\n  }\n\n  stop() {\n    if (this.active) {\n      this.deps.forEach((dep) => {\n        dep.delete(this);\n      });\n      this.deps.length = 0;\n      this.active = false;\n    }\n  }\n}\n\nexport function effect(fn, options?) {\n  const _effect = new ReactiveEffect(fn);\n  if (options) {\n    extend(_effect, options);\n  }\n  _effect.run();\n\n  // 返回runner，让用户自行选择调用时机(effectFn)\n  const runner: any = _effect.run.bind(_effect);\n  runner.effect = _effect;\n\n  return runner;\n}\n\nexport function stop(runner) {\n  runner.effect.stop();\n}\n\nexport function track(target, key) {\n  // 如果响应式数据不在effect中，那直接不用收集了，因为收集了也没有触发更新的时机。\n\n  if (!isTracking()) {\n    return;\n  }\n\n  let depsMap = targetMap.get(target);\n  if (!depsMap) {\n    depsMap = new Map();\n    targetMap.set(target, depsMap);\n  }\n\n  let dep = depsMap.get(key);\n  if (!dep) {\n    dep = new Set();\n    depsMap.set(key, dep);\n  }\n  trackEffect(dep);\n}\n\nexport function trigger(target, key) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    // 没有被track， 比如 shallowReactive.spec.ts中，shallowReactive，没有收集依赖，但是在修改props.n时候触发更新，找不到depsMap\n    return;\n  }\n  const deps = depsMap.get(key);\n  triggerEffect(deps);\n}\n\nexport function isTracking() {\n  return shouldTrack && activeEffect !== undefined;\n}\n\nexport function trackEffect(dep) {\n  if (!dep.has(activeEffect)) {\n    dep.add(activeEffect);\n    (activeEffect as any).deps.push(dep);\n  }\n}\n\nexport function triggerEffect(deps) {\n  deps.forEach((effect) => {\n    if (effect.scheduler) {\n      effect.scheduler();\n    } else {\n      effect.run();\n    }\n  });\n}\n","import { isObject } from \"../../shared/src\";\nimport { track, trigger } from \"./effect\";\nimport { reactive, ReactiveFlags, readonly } from \"./reactive\";\n\nconst get = createGetter();\nconst readonlyGet = createGetter(true);\nconst shallowReadonlyGet = createGetter(true, true);\nconst shallowReactiveGet = createGetter(false, true);\n\nexport const mutableHandlers = {\n  get,\n  set: (target, key, newValue, receiver) => {\n    const res = Reflect.set(target, key, newValue, receiver);\n    trigger(target, key);\n    return res;\n  }\n}\n\nexport const readonlyHandlers = {\n  get: readonlyGet,\n  set: (target, key) => {\n    console.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`)\n    return true;\n  }\n}\n\nexport const shallowReadonlyHandlers = {\n  get: shallowReadonlyGet,\n  set: (target, key) => {\n    console.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`)\n    return true;\n  }\n}\n\nexport const shallowReactiveHandlers = {\n  get: shallowReactiveGet,\n  set: (target, key, newValue, receiver) => {\n    const res = Reflect.set(target, key, newValue, receiver);\n    trigger(target, key);\n    return res;\n  }\n}\n\nfunction createGetter(isReadonly = false, shallow = false) {\n  return function get(target, key, receiver) {\n    if (key === ReactiveFlags.IS_READONLY) {\n      return isReadonly\n    }\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return !isReadonly;\n    }\n\n    if (key === ReactiveFlags.IS_SHALLOW){\n      return shallow;\n    }\n\n    const res = Reflect.get(target, key, receiver);\n\n    if (!isReadonly) {\n      track(target, key);\n    }\n\n    if (shallow) {\n      return res;\n    }\n\n    if (isObject(res)) {\n      return isReadonly ? readonly(res) : reactive(res);\n    }\n\n    return res;\n  }\n}","import { mutableHandlers, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHandlers } from \"./baseHandlers\";\n\nexport const enum ReactiveFlags {\n  IS_REACTIVE = '__v_isReactive',\n  IS_READONLY = '__v_isReadonly',\n  IS_SHALLOW = '__v_isShallow',\n  RAW = '__v_raw',\n}\n\nexport function reactive(raw) {\n  return new Proxy(raw, mutableHandlers)\n}\n\nexport function readonly(raw) {\n  return createReactiveObject(raw, readonlyHandlers);\n}\n\nexport function shallowReadonly(raw) {\n  return createReactiveObject(raw, shallowReadonlyHandlers)\n}\n\nexport function shallowReactive(raw) {\n  return createReactiveObject(raw, shallowReactiveHandlers);\n}\n\nfunction createReactiveObject(raw, baseHandlers) {\n  const proxy = new Proxy(raw, baseHandlers);\n  return proxy;\n}\n\n/**\n * 判断是否是reactive响应式数据\n * isReactive会读取value[ReactiveFlags.IS_REACTIVE]的属性值，触发proxy.get\n * 普通对象因为没有new Proxy，所以返回undefined\n * 被reactive包裹的对象，在new Proxy() getHandlers中设置了IS_REACTIVE = true\n */\nexport function isReactive(value) {\n  return !!value[ReactiveFlags.IS_REACTIVE];\n}\n\nexport function isReadonly(value) {\n  return !!value[ReactiveFlags.IS_READONLY];\n}\n\nexport function isProxy(value) {\n  return isReactive(value) || isReadonly(value);\n}\n\nexport function isShallow(value) {\n  return !!value[ReactiveFlags.IS_SHALLOW];\n}\n\n","import { isObject } from \"./../../shared/src/index\";\nimport { hasChanged } from \"../../shared/src\";\nimport { isTracking, trackEffect, triggerEffect } from \"./effect\";\nimport { reactive } from \"./reactive\";\n\nexport class RefImpl {\n  private _rawValue: any;\n  private _value: any;\n  public dep: Set<unknown>; // TODO:定义一下type Dep\n  public __v_isRef = true;\n  constructor(value) {\n    this._rawValue = value;\n    this._value = convert(value);\n    this.dep = new Set();\n  }\n\n  get value() {\n    if (isTracking()) {\n      trackEffect(this.dep);\n    }\n    return this._value;\n  }\n\n  set value(newValue) {\n    if (hasChanged(this._rawValue, newValue)) {\n      this._rawValue = newValue;\n      this._value = convert(newValue);\n      triggerEffect(this.dep);\n    }\n  }\n}\n\nfunction convert(value) {\n  return isObject(value) ? reactive(value) : value;\n}\n\nexport function ref(value) {\n  return new RefImpl(value);\n}\n\nexport function isRef(ref) {\n  return !!ref.__v_isRef;\n}\n\nexport function unRef(ref) {\n  return isRef(ref) ? ref.value : ref;\n}\n\nexport function proxyRefs(objectWithRefs) {\n  return new Proxy(objectWithRefs, {\n    get(target, key) {\n      return unRef(Reflect.get(target, key));\n    },\n    set(target, key, value) {\n      // 如果set的value不是一个Ref，那么就代理更改.value\n      if (isRef(target[key]) && !isRef(value)) {\n        return (target[key].value = value);\n      } else {\n        // 如果value是一个Ref，那么直接替换。\n        return Reflect.set(target, key, value);\n      }\n    },\n  });\n}\n","import { ReactiveEffect } from \"./effect\";\n\nclass ComputedRefImpl {\n  private _value: any;\n  private _dirty: boolean = true;\n  private effect: ReactiveEffect;\n  constructor(getter) {\n    this.effect = new ReactiveEffect(getter, () => {\n      this._dirty = true;\n    });\n  }\n\n  get value() {\n    if (this._dirty) {\n      this._dirty = false;\n      this._value = this.effect.run();\n    }\n    return this._value;\n  }\n}\n\nexport function computed(getter) {\n  return new ComputedRefImpl(getter);\n}\n"],"names":[],"mappings":"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"}